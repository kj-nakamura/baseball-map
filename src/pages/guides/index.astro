---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const guides = await getCollection('guides');
const sortedGuides = guides.sort((a, b) =>
  a.data.team.localeCompare(b.data.team)
);

// ãƒªãƒ¼ã‚°åˆ¥ã«åˆ†é¡
const centralLeague = sortedGuides.filter(
  guide => guide.data.league === 'ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒ»ãƒªãƒ¼ã‚°'
);
const pacificLeague = sortedGuides.filter(
  guide => guide.data.league === 'ãƒ‘ã‚·ãƒ•ã‚£ãƒƒã‚¯ãƒ»ãƒªãƒ¼ã‚°'
);
---

<BaseLayout
  title="è¦³æˆ¦ã‚¬ã‚¤ãƒ‰ä¸€è¦§ | ãƒ—ãƒ­é‡çƒ12çƒå›£æœ¬æ‹ åœ°ãƒãƒƒãƒ—"
  description="ãƒ—ãƒ­é‡çƒ12çƒå›£ã®è¦³æˆ¦ã‚¬ã‚¤ãƒ‰ä¸€è¦§ã€‚å„çƒå ´ã®ã‚¢ã‚¯ã‚»ã‚¹ã€ã‚°ãƒ«ãƒ¡ã€è¦³æˆ¦ã®ã‚³ãƒ„ã‚’è©³ã—ãç´¹ä»‹"
>
  <header class="guides-header">
    <div class="header-content">
      <h1>ğŸ“– è¦³æˆ¦ã‚¬ã‚¤ãƒ‰ä¸€è¦§</h1>
      <p class="subtitle">ãƒ—ãƒ­é‡çƒ12çƒå›£ã®æœ¬æ‹ åœ°çƒå ´è¦³æˆ¦ã‚¬ã‚¤ãƒ‰</p>
      <nav>
        <a href="/" class="nav-link">â† çƒå ´ãƒãƒƒãƒ—ã«æˆ»ã‚‹</a>
      </nav>
    </div>
  </header>

  <main class="guides-content">
    <!-- ã‚»ãƒ»ãƒªãƒ¼ã‚° -->
    <section class="league-section">
      <h2 class="league-title">ğŸ”´ ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒ»ãƒªãƒ¼ã‚°</h2>
      <div class="guides-grid">
        {
          centralLeague.map(guide => (
            <div class="guide-card">
              <div class="card-header">
                <h3>{guide.data.stadium}</h3>
                <p class="team-name">{guide.data.team}</p>
              </div>
              <div class="card-content">
                <p class="league">{guide.data.league}</p>
                <p class="location">ğŸ“ {guide.data.location}</p>
                {guide.data.capacity && (
                  <p class="capacity">
                    ğŸ‘¥ åå®¹äººæ•°: {guide.data.capacity.toLocaleString()}äºº
                  </p>
                )}
                <p class="description">{guide.data.description}</p>
              </div>
              <div class="card-footer">
                <a href={`/guides/${guide.slug}`} class="guide-link">
                  è¦³æˆ¦ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ã‚‹ â†’
                </a>
              </div>
            </div>
          ))
        }
      </div>
    </section>

    <!-- ãƒ‘ãƒ»ãƒªãƒ¼ã‚° -->
    <section class="league-section">
      <h2 class="league-title">ğŸ”µ ãƒ‘ã‚·ãƒ•ã‚£ãƒƒã‚¯ãƒ»ãƒªãƒ¼ã‚°</h2>
      <div class="guides-grid">
        {
          pacificLeague.map(guide => (
            <div class="guide-card">
              <div class="card-header">
                <h3>{guide.data.stadium}</h3>
                <p class="team-name">{guide.data.team}</p>
              </div>
              <div class="card-content">
                <p class="league">{guide.data.league}</p>
                <p class="location">ğŸ“ {guide.data.location}</p>
                {guide.data.capacity && (
                  <p class="capacity">
                    ğŸ‘¥ åå®¹äººæ•°: {guide.data.capacity.toLocaleString()}äºº
                  </p>
                )}
                <p class="description">{guide.data.description}</p>
              </div>
              <div class="card-footer">
                <a href={`/guides/${guide.slug}`} class="guide-link">
                  è¦³æˆ¦ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ã‚‹ â†’
                </a>
              </div>
            </div>
          ))
        }
      </div>
    </section>
  </main>
</BaseLayout>

<style>
  @import './index.css';
</style>
