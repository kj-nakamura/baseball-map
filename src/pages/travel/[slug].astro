---
import { getCollection } from 'astro:content';
import BlogLayout from '../../layouts/BlogLayout.astro';
import './slug.css';

export async function getStaticPaths() {
  const travels = await getCollection('travel');
  return travels.map(travel => ({
    params: { slug: travel.slug },
    props: travel,
  }));
}

const travel = Astro.props;
const { Content } = await travel.render();
---

<BlogLayout
  title={travel.data.title}
  description={travel.data.description}
  category="æ—…è¡Œãƒ—ãƒ©ãƒ³"
>
  <!-- ãƒã‚¤ãƒ©ã‚¤ãƒˆãƒœãƒƒã‚¯ã‚¹ -->
  <div class="highlight-box">
    <h3>ğŸŒŸ ã“ã®ãƒ—ãƒ©ãƒ³ã®ãƒã‚¤ãƒ³ãƒˆ</h3>
    <ul>
      {travel.data.highlights.map(highlight => <li>{highlight}</li>)}
    </ul>
  </div>

  <!-- ã‚³ãƒ¼ã‚¹æ¦‚è¦ -->
  <section class="overview">
    <h2>ğŸ“… ã‚³ãƒ¼ã‚¹æ¦‚è¦</h2>
    <div class="overview-grid">
      <div class="overview-item">
        <h3>æœŸé–“</h3>
        <p>{travel.data.duration}</p>
      </div>
      {
        travel.data.cost && (
          <div class="overview-item">
            <h3>äºˆç®—ç›®å®‰</h3>
            <p>{travel.data.cost.budget}</p>
          </div>
        )
      }
      <div class="overview-item">
        <h3>ç›®çš„åœ°</h3>
        <p>{travel.data.destination}</p>
      </div>
      <div class="overview-item">
        <h3>ã‚«ãƒ†ã‚´ãƒª</h3>
        <p>{travel.data.category}</p>
      </div>
    </div>
  </section>

  <!-- è©³ç´°ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« -->
  <section class="itinerary">
    <h2>ğŸ—“ï¸ è©³ç´°ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</h2>

    {
      travel.data.itinerary.map(day => (
        <div class="day-section">
          <h3 class="day-title">
            ğŸ“… {day.day}æ—¥ç›®: {day.title}
          </h3>
          <div class="schedule">
            {day.activities.map(activity => {
              const [time, ...activityParts] = activity.split(' ');
              const activityText = activityParts.join(' ');
              return (
                <div class="time-slot">
                  <div class="time">{time}</div>
                  <div class="activity">
                    <p>{activityText}</p>
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      ))
    }
  </section>

  <!-- äºˆç®—è©³ç´° -->
  {
    travel.data.cost && (
      <section class="budget">
        <h2>ğŸ’° äºˆç®—è©³ç´°</h2>
        <div class="budget-grid">
          <div class="budget-item">
            <h3>ç·äºˆç®—</h3>
            <p>{travel.data.cost.budget}</p>
          </div>
          {travel.data.cost.accommodation && (
            <div class="budget-item">
              <h3>å®¿æ³Šè²»</h3>
              <p>{travel.data.cost.accommodation}</p>
            </div>
          )}
          {travel.data.cost.transportation && (
            <div class="budget-item">
              <h3>äº¤é€šè²»</h3>
              <p>{travel.data.cost.transportation}</p>
            </div>
          )}
          {travel.data.cost.food && (
            <div class="budget-item">
              <h3>é£Ÿäº‹ä»£</h3>
              <p>{travel.data.cost.food}</p>
            </div>
          )}
        </div>
      </section>
    )
  }

  <!-- ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <div class="article-content">
    <Content />
  </div>

  <!-- æ—…è¡Œã®ã‚³ãƒ„ -->
  {
    travel.data.tips && travel.data.tips.length > 0 && (
      <section class="tips">
        <h2>ğŸ’¡ æ—…è¡Œã®ã‚³ãƒ„</h2>
        <div class="tips-grid">
          {travel.data.tips.map(tip => (
            <div class="tip-item">
              <p>{tip}</p>
            </div>
          ))}
        </div>
      </section>
    )
  }
</BlogLayout>
