---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const travels = await getCollection('travel');
const sortedTravels = travels.sort((a, b) =>
  a.data.title.localeCompare(b.data.title)
);

// ãƒãƒ¼ãƒ åã¨ãƒªãƒ¼ã‚°ã®ãƒãƒƒãƒ”ãƒ³ã‚°
const teamInfo = {
  'tokyo-giants': { name: 'èª­å£²ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒ„', icon: 'ğŸ¯', league: 'central', prefecture: 'æ±äº¬éƒ½' },
  'tokyo-swallows': { name: 'æ±äº¬ãƒ¤ã‚¯ãƒ«ãƒˆã‚¹ãƒ¯ãƒ­ãƒ¼ã‚º', icon: 'ğŸ¨', league: 'central', prefecture: 'æ±äº¬éƒ½' },
  'yokohama': { name: 'æ¨ªæµœDeNAãƒ™ã‚¤ã‚¹ã‚¿ãƒ¼ã‚º', icon: 'ğŸŒ‰', league: 'central', prefecture: 'ç¥å¥ˆå·çœŒ' },
  'osaka-tigers': { name: 'é˜ªç¥ã‚¿ã‚¤ã‚¬ãƒ¼ã‚¹', icon: 'ğŸ…', league: 'central', prefecture: 'å…µåº«çœŒ' },
  'nagoya': { name: 'ä¸­æ—¥ãƒ‰ãƒ©ã‚´ãƒ³ã‚º', icon: 'ğŸ°', league: 'central', prefecture: 'æ„›çŸ¥çœŒ' },
  'hiroshima': { name: 'åºƒå³¶æ±æ´‹ã‚«ãƒ¼ãƒ—', icon: 'â›©ï¸', league: 'central', prefecture: 'åºƒå³¶çœŒ' },
  'hokkaido': { name: 'åŒ—æµ·é“æ—¥æœ¬ãƒãƒ ãƒ•ã‚¡ã‚¤ã‚¿ãƒ¼ã‚º', icon: 'ğŸ”ï¸', league: 'pacific', prefecture: 'åŒ—æµ·é“' },
  'osaka-2days': { name: 'ã‚ªãƒªãƒƒã‚¯ã‚¹ãƒ»ãƒãƒ•ã‚¡ãƒ­ãƒ¼ã‚º', icon: 'ğŸƒ', league: 'pacific', prefecture: 'å¤§é˜ªåºœ' },
  'saitama': { name: 'åŸ¼ç‰è¥¿æ­¦ãƒ©ã‚¤ã‚ªãƒ³ã‚º', icon: 'ğŸŒ¸', league: 'pacific', prefecture: 'åŸ¼ç‰çœŒ' },
  'chiba-lotte': { name: 'åƒè‘‰ãƒ­ãƒƒãƒ†ãƒãƒªãƒ¼ãƒ³ã‚º', icon: 'ğŸŒŠ', league: 'pacific', prefecture: 'åƒè‘‰çœŒ' },
  'chiba': { name: 'åƒè‘‰ãƒ­ãƒƒãƒ†ãƒãƒªãƒ¼ãƒ³ã‚º', icon: 'ğŸŒŠ', league: 'pacific', prefecture: 'åƒè‘‰çœŒ' },
  'miyagi': { name: 'æ±åŒ—æ¥½å¤©ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¤ãƒ¼ã‚°ãƒ«ã‚¹', icon: 'ğŸ¦…', league: 'pacific', prefecture: 'å®®åŸçœŒ' },
  'fukuoka': { name: 'ç¦å²¡ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ãƒ›ãƒ¼ã‚¯ã‚¹', icon: 'ğŸœ', league: 'pacific', prefecture: 'ç¦å²¡çœŒ' }
};

function getTeamInfo(slug) {
  // ã‚ˆã‚Šæ­£ç¢ºãªãƒãƒƒãƒãƒ³ã‚°ã®ãŸã‚ã€ã‚ˆã‚Šé•·ã„ã‚­ãƒ¼ã‹ã‚‰è©¦ã™
  const sortedKeys = Object.keys(teamInfo).sort((a, b) => b.length - a.length);
  const teamKey = sortedKeys.find(key => slug.includes(key));
  return teamKey ? { key: teamKey, ...teamInfo[teamKey] } : { 
    key: '', 
    name: 'çƒå›£æœªå®š', 
    icon: 'âš¾', 
    league: 'central',
    prefecture: 'æœªå®š'
  };
}

// ã‚»ãƒ»ãƒªãƒ¼ã‚°ã¨ãƒ‘ãƒ»ãƒªãƒ¼ã‚°ã«åˆ†ã‘ã¦æ•´ç†
const centralTravels = sortedTravels.filter(travel => {
  const info = getTeamInfo(travel.slug);
  return info.league === 'central';
});

const pacificTravels = sortedTravels.filter(travel => {
  const info = getTeamInfo(travel.slug);
  return info.league === 'pacific';
});
---

<BaseLayout
  title="ãƒ¢ãƒ‡ãƒ«ã‚³ãƒ¼ã‚¹ä¸€è¦§ - ãƒ—ãƒ­é‡çƒè¦³æˆ¦æ—…è¡Œãƒ—ãƒ©ãƒ³"
  description="å…¨12çƒå›£ã®è¦³æˆ¦ï¼‹è¦³å…‰ãƒ¢ãƒ‡ãƒ«ã‚³ãƒ¼ã‚¹ã€‚é‡çƒè¦³æˆ¦ã¨å„åœ°ã®é­…åŠ›ã‚’æº€å–«ã™ã‚‹æ—…è¡Œãƒ—ãƒ©ãƒ³ã®æ±ºå®šç‰ˆã€‚"
>
  <header class="travel-hero">
    <div class="hero-overlay">
      <div class="hero-content">
        <h1 class="hero-title">âš¾ ãƒ—ãƒ­é‡çƒè¦³æˆ¦æ—…è¡Œ</h1>
        <h2 class="hero-subtitle">ãƒ¢ãƒ‡ãƒ«ã‚³ãƒ¼ã‚¹ä¸€è¦§</h2>
        <p class="hero-description">
          é‡çƒè¦³æˆ¦ã¨å„åœ°ã®é­…åŠ›ã‚’çµ„ã¿åˆã‚ã›ãŸã€å……å®Ÿã®æ—…è¡Œãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆ
        </p>
        <div class="hero-stats">
          <div class="stat-item">
            <span class="stat-number">12</span>
            <span class="stat-label">çƒå›£</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{sortedTravels.length}</span>
            <span class="stat-label">ãƒ—ãƒ©ãƒ³</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">1-3æ³Š</span>
            <span class="stat-label">ã‚³ãƒ¼ã‚¹</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="travel-main">
    <!-- ã‚»ãƒ»ãƒªãƒ¼ã‚° -->
    <section class="league-section">
      <div class="league-header">
        <h2 class="league-title">ğŸ”´ ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒ»ãƒªãƒ¼ã‚°</h2>
        <p class="league-description">ä¼çµ±ã¨æ­´å²ã‚ã‚‹6çƒå›£ã®æœ¬æ‹ åœ°ã‚’å·¡ã‚‹æ—…</p>
      </div>

      <div class="course-grid">
        {centralTravels.map((travel) => {
          const info = getTeamInfo(travel.slug);
          return (
            <article class="course-card central-league">
              <div class="course-image">
                <div class="course-icon">{info.icon}</div>
                <div class="course-badge">{info.prefecture}</div>
              </div>
              <div class="course-content">
                <h3 class="course-title">{travel.data.title}</h3>
                <p class="course-team">{info.name}</p>
                <p class="course-description">{travel.data.description}</p>
                <div class="course-details">
                  <span class="course-duration">{travel.data.duration}</span>
                  <span class="course-budget">{travel.data.cost.budget}</span>
                </div>
                <a href={`/travel/${travel.slug}`} class="course-link">
                  è©³ç´°ã‚’è¦‹ã‚‹ <span class="link-arrow">â†’</span>
                </a>
              </div>
            </article>
          );
        })}
      </div>
    </section>

    <!-- ãƒ‘ãƒ»ãƒªãƒ¼ã‚° -->
    <section class="league-section">
      <div class="league-header">
        <h2 class="league-title">ğŸ”µ ãƒ‘ã‚·ãƒ•ã‚£ãƒƒã‚¯ãƒ»ãƒªãƒ¼ã‚°</h2>
        <p class="league-description">é©æ–°çš„ã§é­…åŠ›ã‚ã‚‹6çƒå›£ã®æœ¬æ‹ åœ°ã‚’å·¡ã‚‹æ—…</p>
      </div>

      <div class="course-grid">
        {pacificTravels.map((travel) => {
          const info = getTeamInfo(travel.slug);
          return (
            <article class="course-card pacific-league">
              <div class="course-image">
                <div class="course-icon">{info.icon}</div>
                <div class="course-badge">{info.prefecture}</div>
              </div>
              <div class="course-content">
                <h3 class="course-title">{travel.data.title}</h3>
                <p class="course-team">{info.name}</p>
                <p class="course-description">{travel.data.description}</p>
                <div class="course-details">
                  <span class="course-duration">{travel.data.duration}</span>
                  <span class="course-budget">{travel.data.cost.budget}</span>
                </div>
                <a href={`/travel/${travel.slug}`} class="course-link">
                  è©³ç´°ã‚’è¦‹ã‚‹ <span class="link-arrow">â†’</span>
                </a>
              </div>
            </article>
          );
        })}
      </div>
    </section>

    <!-- å…¨ãƒ—ãƒ©ãƒ³ä¸€è¦§ -->
    <section class="league-section">
      <div class="league-header">
        <h2 class="league-title">ğŸ“‹ å…¨ãƒ—ãƒ©ãƒ³ä¸€è¦§</h2>
        <p class="league-description">ã™ã¹ã¦ã®é‡çƒè¦³æˆ¦æ—…è¡Œãƒ—ãƒ©ãƒ³ã‚’ä¸€è¦§ã§ã”ç¢ºèªã„ãŸã ã‘ã¾ã™</p>
      </div>

      <div class="course-grid">
        {sortedTravels.map((travel) => {
          const info = getTeamInfo(travel.slug);
          const cardClass = info.league === 'pacific' ? 'pacific-league' : 'central-league';
          
          return (
            <article class={`course-card ${cardClass}`}>
              <div class="course-image">
                <div class="course-icon">{info.icon}</div>
                <div class="course-badge">{info.prefecture}</div>
              </div>
              <div class="course-content">
                <h3 class="course-title">{travel.data.title}</h3>
                <p class="course-team">{info.name}</p>
                <p class="course-description">{travel.data.description}</p>
                <div class="course-details">
                  <span class="course-duration">{travel.data.duration}</span>
                  <span class="course-budget">{travel.data.cost.budget}</span>
                </div>
                <a href={`/travel/${travel.slug}`} class="course-link">
                  è©³ç´°ã‚’è¦‹ã‚‹ <span class="link-arrow">â†’</span>
                </a>
              </div>
            </article>
          );
        })}
      </div>
    </section>

    <!-- ãƒ—ãƒ©ãƒ³æ¯”è¼ƒ -->
    <section class="comparison-section">
      <div class="comparison-header">
        <h2 class="comparison-title">ğŸ’¡ ãƒ—ãƒ©ãƒ³é¸ã³ã®ã‚³ãƒ„</h2>
        <p class="comparison-description">
          ã‚ãªãŸã«ã´ã£ãŸã‚Šã®è¦³æˆ¦æ—…è¡Œãƒ—ãƒ©ãƒ³ã‚’è¦‹ã¤ã‘ã‚ˆã†
        </p>
      </div>

      <div class="comparison-grid">
        <div class="comparison-card">
          <div class="comparison-icon">ğŸ’°</div>
          <h3>äºˆç®—é‡è¦–</h3>
          <p>3-6ä¸‡å††ã®ä½äºˆç®—ãƒ—ãƒ©ãƒ³</p>
          <ul class="comparison-list">
            <li>åŸ¼ç‰ã®ã‚“ã³ã‚Šã‚³ãƒ¼ã‚¹</li>
            <li>åƒè‘‰ãƒãƒªãƒ³ã‚³ãƒ¼ã‚¹</li>
            <li>åå¤å±‹ã‚°ãƒ«ãƒ¡ã‚³ãƒ¼ã‚¹</li>
          </ul>
        </div>

        <div class="comparison-card">
          <div class="comparison-icon">ğŸ½ï¸</div>
          <h3>ã‚°ãƒ«ãƒ¡é‡è¦–</h3>
          <p>ã”å½“åœ°ã‚°ãƒ«ãƒ¡ã‚’å ªèƒ½</p>
          <ul class="comparison-list">
            <li>å¤§é˜ªé£Ÿã„å€’ã‚Œã‚³ãƒ¼ã‚¹</li>
            <li>åå¤å±‹ã‚°ãƒ«ãƒ¡ã‚³ãƒ¼ã‚¹</li>
            <li>å®®åŸã‚°ãƒ«ãƒ¡ã‚³ãƒ¼ã‚¹</li>
            <li>ç¦å²¡ã‚°ãƒ«ãƒ¡ã‚³ãƒ¼ã‚¹</li>
          </ul>
        </div>

        <div class="comparison-card">
          <div class="comparison-icon">ğŸ›ï¸</div>
          <h3>è¦³å…‰é‡è¦–</h3>
          <p>æ­´å²ãƒ»æ–‡åŒ–ã‚’æº€å–«</p>
          <ul class="comparison-list">
            <li>æ±äº¬ç‹é“è¦³å…‰ã‚³ãƒ¼ã‚¹</li>
            <li>å¹³å’Œãƒ»å®®å³¶æº€å–«ã‚³ãƒ¼ã‚¹</li>
            <li>å¤§é˜ªãƒ»ç¥æˆ¸æº€å–«ã‚³ãƒ¼ã‚¹</li>
          </ul>
        </div>

        <div class="comparison-card">
          <div class="comparison-icon">ğŸŒŸ</div>
          <h3>ç‰¹åˆ¥ä½“é¨“é‡è¦–</h3>
          <p>ã“ã“ã§ã—ã‹ã§ããªã„ä½“é¨“</p>
          <ul class="comparison-list">
            <li>åŒ—æµ·é“å¤§è‡ªç„¶ã‚³ãƒ¼ã‚¹</li>
            <li>æ±äº¬ãƒ¢ãƒ€ãƒ³è¦³å…‰ã‚³ãƒ¼ã‚¹</li>
            <li>æ¨ªæµœã¿ãªã¨ã¿ã‚‰ã„ã‚³ãƒ¼ã‚¹</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- CTA -->
    <section class="cta-section">
      <div class="cta-content">
        <h2 class="cta-title">âš¾ é‡çƒè¦³æˆ¦æ—…è¡Œã‚’ã¯ã˜ã‚ã‚ˆã†</h2>
        <p class="cta-description">
          ãŠæ°—ã«å…¥ã‚Šã®çƒå›£ã€è¡ŒããŸã„å ´æ‰€ã‹ã‚‰æ—…è¡Œãƒ—ãƒ©ãƒ³ã‚’é¸ã‚“ã§ã€æœ€é«˜ã®è¦³æˆ¦æ—…è¡Œä½“é¨“ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ã€‚
        </p>
        <div class="cta-buttons">
          <a href="/guides" class="cta-button primary">è¦³æˆ¦ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ã‚‹</a>
          <a href="/" class="cta-button secondary">çƒå ´ãƒãƒƒãƒ—ã«æˆ»ã‚‹</a>
        </div>
      </div>
    </section>
  </main>
</BaseLayout>

<style>
  @import './index.css';
</style>
